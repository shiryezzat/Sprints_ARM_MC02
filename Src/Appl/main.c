/**************************************************************************************************
 *	FILE DESCRIPTION
 *	---------------------------------------------------------------------------------------------*/
/**		\file
 *		\brief
 *
 *		\details
 *
 *
 *************************************************************************************************/
  
/**************************************************************************************************
 *	INCLUDES
 *************************************************************************************************/
#include "Mcu_Hw.h"
#include "Dio.h"
#include "SysCtrl.h"
#include "IntCtrl.h"
#include "Gpt.h"
#include "Port.h"
/**************************************************************************************************
 *	LOCAL MACROS CONSTANT\FUNCTION
 *************************************************************************************************/
 
/**************************************************************************************************
 *	LOCAL DATA
 *************************************************************************************************/
 
/**************************************************************************************************
 *	GLOBAL DATA
 *************************************************************************************************/
uint8 onTime = 3;
uint8 offTime = 1;
/**************************************************************************************************
 *	LOCAL FUNCTION PROTOTYPES
 *************************************************************************************************/
 void Toggle_Led(void);
/**************************************************************************************************
 *	LOCAL FUNCTIONS
 *************************************************************************************************/
 
/**************************************************************************************************
 *	GLOBAL FUNCTIONS
 *************************************************************************************************/
int main(){
	uint32 i=0;

	IntCtrl_Init();
	SysCtrl_Init();
	Port_Init();
	Gpt_Init();

	for ( i = 0; i < ACTIVATED_TIMERS_NUM; i++)
	{
		Gpt_EnableNotification(&gpt_config[i], Toggle_Led);
		Gpt_StartTimer(&gpt_config[i], offTime);
	}
	
	for(;;){}
}

void Toggle_Led(){
	uint32 i=0;
	for ( i = 0; i < ACTIVATED_TIMERS_NUM; i++)
	{
		if (Dio_ReadChannel(Dio_Channel_F2) == Dio_Low){
			Dio_FlipChannel(Dio_Channel_F2);
			Gpt_StartTimer(&gpt_config[i], onTime);
		}
		else{
			Dio_FlipChannel(Dio_Channel_F2);
			Gpt_StartTimer(&gpt_config[i], offTime);
		}
	}
	
} 
 
/**************************************************************************************************
 *	END OF FILE:
 *************************************************************************************************/
